let skuInfo = [
    {
        "sku_id": 48,
        "goods_id": 30,
        "goods_name": "多规格测试",
        "goods_sn": "20211021000002",
        "price": 0,
        "specs": "[{\"spec_id\":394,\"spec_value\":\"大号\",\"user_id\":null,\"spec_name\":\"大小\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2639},{\"spec_id\":395,\"spec_value\":\"绿色\",\"user_id\":null,\"spec_name\":\"颜色\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2641},{\"spec_id\":396,\"spec_value\":\"重\",\"user_id\":null,\"spec_name\":\"重量\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2645}]",
        "user_id": 157,
        "user_name": "zhongjun",
        "category_id": 19,
        "thumbnail": "http://zhongjun-mall-test.oss-accelerate.aliyuncs.com/zj-shop/normal/5F9736D8970A402EA29ACA959D042BE9.jpg_300x300",
        "goods_unit": "个",
        "hash_code": 1037436073,
        "spec_list": [
            {
                "spec_id": 394,
                "spec_value": "大号",
                "user_id": null,
                "spec_name": "大小",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2639
            },
            {
                "spec_id": 395,
                "spec_value": "绿色",
                "user_id": null,
                "spec_name": "颜色",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2641
            },
            {
                "spec_id": 396,
                "spec_value": "重",
                "user_id": null,
                "spec_name": "重量",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2645
            }
        ],
        "disabled": null
    },
    {
        "sku_id": 49,
        "goods_id": 30,
        "goods_name": "多规格测试",
        "goods_sn": "20211021000002",
        "price": 0,
        "specs": "[{\"spec_id\":394,\"spec_value\":\"大号\",\"user_id\":null,\"spec_name\":\"大小\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2639},{\"spec_id\":395,\"spec_value\":\"绿色\",\"user_id\":null,\"spec_name\":\"颜色\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2641},{\"spec_id\":396,\"spec_value\":\"轻\",\"user_id\":null,\"spec_name\":\"重量\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2646}]",
        "user_id": 157,
        "user_name": "zhongjun",
        "category_id": 19,
        "thumbnail": "http://zhongjun-mall-test.oss-accelerate.aliyuncs.com/zj-shop/normal/5F9736D8970A402EA29ACA959D042BE9.jpg_300x300",
        "goods_unit": "个",
        "hash_code": 1037435479,
        "spec_list": [
            {
                "spec_id": 394,
                "spec_value": "大号",
                "user_id": null,
                "spec_name": "大小",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2639
            },
            {
                "spec_id": 395,
                "spec_value": "绿色",
                "user_id": null,
                "spec_name": "颜色",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2641
            },
            {
                "spec_id": 396,
                "spec_value": "轻",
                "user_id": null,
                "spec_name": "重量",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2646
            }
        ],
        "disabled": null
    },
    {
        "sku_id": 50,
        "goods_id": 30,
        "goods_name": "多规格测试",
        "goods_sn": "20211021000002",
        "price": 0,
        "specs": "[{\"spec_id\":394,\"spec_value\":\"大号\",\"user_id\":null,\"spec_name\":\"大小\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2639},{\"spec_id\":395,\"spec_value\":\"黄色\",\"user_id\":null,\"spec_name\":\"颜色\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2642},{\"spec_id\":396,\"spec_value\":\"重\",\"user_id\":null,\"spec_name\":\"重量\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2645}]",
        "user_id": 157,
        "user_name": "zhongjun",
        "category_id": 19,
        "thumbnail": "http://zhongjun-mall-test.oss-accelerate.aliyuncs.com/zj-shop/normal/5F9736D8970A402EA29ACA959D042BE9.jpg_300x300",
        "goods_unit": "个",
        "hash_code": 1046764624,
        "spec_list": [
            {
                "spec_id": 394,
                "spec_value": "大号",
                "user_id": null,
                "spec_name": "大小",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2639
            },
            {
                "spec_id": 395,
                "spec_value": "黄色",
                "user_id": null,
                "spec_name": "颜色",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2642
            },
            {
                "spec_id": 396,
                "spec_value": "重",
                "user_id": null,
                "spec_name": "重量",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2645
            }
        ],
        "disabled": null
    },
    {
        "sku_id": 51,
        "goods_id": 30,
        "goods_name": "多规格测试",
        "goods_sn": "20211021000002",
        "price": 0,
        "specs": "[{\"spec_id\":394,\"spec_value\":\"大号\",\"user_id\":null,\"spec_name\":\"大小\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2639},{\"spec_id\":395,\"spec_value\":\"黄色\",\"user_id\":null,\"spec_name\":\"颜色\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2642},{\"spec_id\":396,\"spec_value\":\"轻\",\"user_id\":null,\"spec_name\":\"重量\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2646}]",
        "user_id": 157,
        "user_name": "zhongjun",
        "category_id": 19,
        "thumbnail": "http://zhongjun-mall-test.oss-accelerate.aliyuncs.com/zj-shop/normal/5F9736D8970A402EA29ACA959D042BE9.jpg_300x300",
        "goods_unit": "个",
        "hash_code": 1046764030,
        "spec_list": [
            {
                "spec_id": 394,
                "spec_value": "大号",
                "user_id": null,
                "spec_name": "大小",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2639
            },
            {
                "spec_id": 395,
                "spec_value": "黄色",
                "user_id": null,
                "spec_name": "颜色",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2642
            },
            {
                "spec_id": 396,
                "spec_value": "轻",
                "user_id": null,
                "spec_name": "重量",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2646
            }
        ],
        "disabled": null
    },
    {
        "sku_id": 52,
        "goods_id": 30,
        "goods_name": "多规格测试",
        "goods_sn": "20211021000002",
        "price": 0,
        "specs": "[{\"spec_id\":394,\"spec_value\":\"小号\",\"user_id\":null,\"spec_name\":\"大小\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2640},{\"spec_id\":395,\"spec_value\":\"绿色\",\"user_id\":null,\"spec_name\":\"颜色\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2641},{\"spec_id\":396,\"spec_value\":\"重\",\"user_id\":null,\"spec_name\":\"重量\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2645}]",
        "user_id": 157,
        "user_name": "zhongjun",
        "category_id": 19,
        "thumbnail": "http://zhongjun-mall-test.oss-accelerate.aliyuncs.com/zj-shop/normal/5F9736D8970A402EA29ACA959D042BE9.jpg_300x300",
        "goods_unit": "个",
        "hash_code": 1069010689,
        "spec_list": [
            {
                "spec_id": 394,
                "spec_value": "小号",
                "user_id": null,
                "spec_name": "大小",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2640
            },
            {
                "spec_id": 395,
                "spec_value": "绿色",
                "user_id": null,
                "spec_name": "颜色",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2641
            },
            {
                "spec_id": 396,
                "spec_value": "重",
                "user_id": null,
                "spec_name": "重量",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2645
            }
        ],
        "disabled": null
    },
    {
        "sku_id": 53,
        "goods_id": 30,
        "goods_name": "多规格测试",
        "goods_sn": "20211021000002",
        "price": 0,
        "specs": "[{\"spec_id\":394,\"spec_value\":\"小号\",\"user_id\":null,\"spec_name\":\"大小\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2640},{\"spec_id\":395,\"spec_value\":\"绿色\",\"user_id\":null,\"spec_name\":\"颜色\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2641},{\"spec_id\":396,\"spec_value\":\"轻\",\"user_id\":null,\"spec_name\":\"重量\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2646}]",
        "user_id": 157,
        "user_name": "zhongjun",
        "category_id": 19,
        "thumbnail": "http://zhongjun-mall-test.oss-accelerate.aliyuncs.com/zj-shop/normal/5F9736D8970A402EA29ACA959D042BE9.jpg_300x300",
        "goods_unit": "个",
        "hash_code": 1069010095,
        "spec_list": [
            {
                "spec_id": 394,
                "spec_value": "小号",
                "user_id": null,
                "spec_name": "大小",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2640
            },
            {
                "spec_id": 395,
                "spec_value": "绿色",
                "user_id": null,
                "spec_name": "颜色",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2641
            },
            {
                "spec_id": 396,
                "spec_value": "轻",
                "user_id": null,
                "spec_name": "重量",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2646
            }
        ],
        "disabled": null
    },
    {
        "sku_id": 54,
        "goods_id": 30,
        "goods_name": "多规格测试",
        "goods_sn": "20211021000002",
        "price": 0,
        "specs": "[{\"spec_id\":394,\"spec_value\":\"小号\",\"user_id\":null,\"spec_name\":\"大小\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2640},{\"spec_id\":395,\"spec_value\":\"黄色\",\"user_id\":null,\"spec_name\":\"颜色\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2642},{\"spec_id\":396,\"spec_value\":\"重\",\"user_id\":null,\"spec_name\":\"重量\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2645}]",
        "user_id": 157,
        "user_name": "zhongjun",
        "category_id": 19,
        "thumbnail": "http://zhongjun-mall-test.oss-accelerate.aliyuncs.com/zj-shop/normal/5F9736D8970A402EA29ACA959D042BE9.jpg_300x300",
        "goods_unit": "个",
        "hash_code": 1078339240,
        "spec_list": [
            {
                "spec_id": 394,
                "spec_value": "小号",
                "user_id": null,
                "spec_name": "大小",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2640
            },
            {
                "spec_id": 395,
                "spec_value": "黄色",
                "user_id": null,
                "spec_name": "颜色",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2642
            },
            {
                "spec_id": 396,
                "spec_value": "重",
                "user_id": null,
                "spec_name": "重量",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2645
            }
        ],
        "disabled": null
    },
    {
        "sku_id": 55,
        "goods_id": 30,
        "goods_name": "多规格测试",
        "goods_sn": "20211021000002",
        "price": 0,
        "specs": "[{\"spec_id\":394,\"spec_value\":\"小号\",\"user_id\":null,\"spec_name\":\"大小\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2640},{\"spec_id\":395,\"spec_value\":\"黄色\",\"user_id\":null,\"spec_name\":\"颜色\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2642},{\"spec_id\":396,\"spec_value\":\"轻\",\"user_id\":null,\"spec_name\":\"重量\",\"sku_id\":null,\"big\":null,\"small\":null,\"thumbnail\":null,\"tiny\":null,\"spec_type\":0,\"spec_image\":\"\",\"spec_value_id\":2646}]",
        "user_id": 157,
        "user_name": "zhongjun",
        "category_id": 19,
        "thumbnail": "http://zhongjun-mall-test.oss-accelerate.aliyuncs.com/zj-shop/normal/5F9736D8970A402EA29ACA959D042BE9.jpg_300x300",
        "goods_unit": "个",
        "hash_code": 1078338646,
        "spec_list": [
            {
                "spec_id": 394,
                "spec_value": "小号",
                "user_id": null,
                "spec_name": "大小",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2640
            },
            {
                "spec_id": 395,
                "spec_value": "黄色",
                "user_id": null,
                "spec_name": "颜色",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2642
            },
            {
                "spec_id": 396,
                "spec_value": "轻",
                "user_id": null,
                "spec_name": "重量",
                "sku_id": null,
                "big": null,
                "small": null,
                "thumbnail": null,
                "tiny": null,
                "spec_type": 0,
                "spec_image": "",
                "spec_value_id": 2646
            }
        ],
        "disabled": null
    }
]

let skuMap = new Map()
let specList = []

skuInfo.forEach((sku, skuIndex) => {
    // 循环每条数据 拿到 spec_list 这是对应的规格值
    const { spec_list, price } = sku
    // 对应的spec的id
    const spec_value_ids = []
    // 如果有规格值 => 多规格
    if (spec_list) {
        // 此处循环会将所有的 sku 下面的 spec_list都展示出来
      spec_list.forEach((spec, specIndex) => {
        //   查看 specList 中有没有对应的规格名
        const _specIndex = specList.findIndex(
          _spec => _spec['spec_id'] === spec.spec_id
        )
        const _spec = {
          spec_id: spec.spec_id, //spec_id 这是规格名的id，相当于一个组id
          spec_name: spec.spec_name,
          spec_type: spec.spec_type
        }
        const _value = {
          spec_value: spec.spec_value,
          spec_value_id: spec.spec_value_id,
          spec_value_img: {
            original: spec.spec_image,
            thumbnail: spec.thumbnail
          }
        }
        spec_value_ids.push(spec.spec_value_id)
        // 没有规格名 往规格集合中 push 当前的值
        if (_specIndex === -1) {
          specList.push({ ..._spec, valueList: [{ ..._value }] })
        } else if (
            /* 1.如果有规格名了（接着上面的逻辑），
                2. 并且规格名中的规格值没有，那么则往该规格名下的集合中push该规格值
            */
          specList[_specIndex]['valueList'].findIndex(
            _value => _value['spec_value_id'] === spec['spec_value_id']
          ) === -1
        ) {
          specList[_specIndex]['valueList'].push({ ..._value })
        }
      })
        skuMap.set(spec_value_ids.join('-'), sku)
    } else {
        skuMap.set('no_spec', sku)
    }
  })


console.log(specList)
console.log(skuMap)