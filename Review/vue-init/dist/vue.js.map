{"version":3,"file":"vue.js","sources":["../src/compiler/parser.js","../src/compiler/index.js","../src/utils.js","../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 匹配标签名的  aa-xxx\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //  aa:aa-xxx  \r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); //  此正则可以匹配到标签名 匹配到结果的第一个(索引第一个) [1]\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>  [1]\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\r\n\r\n// [1]属性的key   [3] || [4] ||[5] 属性的值  a=1  a='1'  a=\"\"\r\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的  />    > \r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{   xxx  }}  \r\n\r\n// vue3的编译原理比vue2里好很多，没有这么多正则了\r\n\r\nexport function parserHTML(html) { \r\n    // 可以不停的截取模板，直到把模板全部解析完毕 \r\n    let stack = [];\r\n    let root = null;\r\n    // 我要构建父子关系  \r\n    function createASTElement(tag,attrs,parent = null){\r\n        return {\r\n            tag,\r\n            type:1, // 元素\r\n            children:[],\r\n            parent,\r\n            attrs\r\n        }\r\n    }\r\n    function start(tag,attrs){ // [div,p]\r\n        // 遇到开始标签 就取栈中的最后一个作为父节点\r\n        let parent = stack[stack.length-1];\r\n        let element = createASTElement(tag,attrs,parent);\r\n        if(root == null){ // 说明当前节点就是根节点\r\n            root = element\r\n        }\r\n        if(parent){\r\n            element.parent = parent; // 跟新p的parent属性 指向parent\r\n            parent.children.push(element);\r\n        }\r\n        stack.push(element)\r\n    }\r\n    function end(tagName){\r\n        let endTag = stack.pop();\r\n        if(endTag.tag != tagName){\r\n            console.log('标签出错')\r\n        }\r\n    }\r\n    function text(chars){\r\n        let parent = stack[stack.length-1];\r\n        chars = chars.replace(/\\s/g,\"\");\r\n        if(chars){\r\n            parent.children.push({\r\n                type:2,\r\n                text:chars\r\n            })\r\n        }\r\n    }\r\n    function advance(len) {\r\n        html = html.substring(len);\r\n    }\r\n    function parseStartTag() {\r\n        const start = html.match(startTagOpen);  // 4.30 继续\r\n        if(start){\r\n            const match = {\r\n                tagName: start[1],\r\n                attrs: []\r\n            }\r\n            advance(start[0].length);\r\n            let end;\r\n            let attr;\r\n            while (!(end = html.match(startTagClose)) && ( attr = html.match(attribute))) { // 1要有属性 2，不能为开始的结束标签 <div>\r\n                match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] });\r\n                advance(attr[0].length);\r\n            } // <div id=\"app\" a=1 b=2 >\r\n            if(end){\r\n                advance(end[0].length);\r\n            }\r\n            return match;\r\n        }\r\n        return false;\r\n    }\r\n    while (html) {\r\n        // 解析标签和文本   \r\n        let index = html.indexOf('<');\r\n        if (index == 0) {\r\n            // 解析开始标签 并且把属性也解析出来  </div>\r\n            const startTagMatch = parseStartTag()\r\n            if (startTagMatch) { // 开始标签\r\n                start(startTagMatch.tagName,startTagMatch.attrs);\r\n                continue;\r\n            }\r\n            let endTagMatch;\r\n            if (endTagMatch = html.match(endTag)) { // 结束标签\r\n                end(endTagMatch[1]);\r\n                advance(endTagMatch[0].length);\r\n                continue;\r\n            }\r\n        }\r\n        // 文本\r\n        if(index > 0){ // 文本\r\n            let chars = html.substring(0,index) //<div></div>\r\n            text(chars);\r\n            advance(chars.length)\r\n        }\r\n    }\r\n\r\n    return root;\r\n\r\n}\r\n\r\n\r\n\r\n//  <div id=\"app\">hello wolrd <span>hello</span></div> */}","import { parserHTML } from \"./parser\";\r\n\r\nexport function compileToFunction(template) {\r\n\r\n    // 1.将模板变成ast语法树\r\n    let ast = parserHTML(template);\r\n    console.log(ast,\"ast\")\r\n\r\n    // // 代码优化 标记静态节点\r\n\r\n    // // 2.代码生成\r\n    // let code = generate(ast);  // 模板引擎的实现原理 都是 new Function + with  ejs jade handlerbar...\r\n    // let render = new Function(`with(this){return ${code}}`);\r\n\r\n    // return render;\r\n    // // 1.编译原理\r\n    // // 2.响应式原理 依赖收集\r\n    // // 3.组件化开发 （贯穿了vue的流程）\r\n    // // 4.diff算法 \r\n}\r\n\r\n","export function isFunction(val) {\r\n  return typeof val == \"function\";\r\n}\r\n\r\nexport function isObject(val) {\r\n  return typeof val == \"object\" && val !== null;\r\n}\r\n\r\nexport let isArray = Array.isArray;\r\n","let oldArrayPrototype = Array.prototype;\r\n//让arrayMethods可以通过__proto__ 获取到数组的方法\r\nexport let arrayMethods = Object.create(oldArrayPrototype);\r\n\r\n//只有这7个方法可以导致数组发生变化\r\nlet methods = [\"push\", \"shift\", \"pop\", \"unshift\", \"reverse\", \"sort\", \"splice\"];\r\n\r\nmethods.forEach((method) => {\r\n  arrayMethods[method] = function (...args) {\r\n    console.log(\"数组的方法进行重写操作\");\r\n    //数组 新增的属性 要看一下是不是对象，如果是对象，继续进行劫持\r\n    oldArrayPrototype[method].call(this, ...args);\r\n\r\n    // 通过__ob__ 进行标识这个对象被监控过  （在vue中被监控的对象身上都有一个__ob__ 这个属性）\r\n\r\n    let inserted = null;\r\n    let ob = this.__ob__;\r\n    switch (method) {\r\n      case \"splice\":\r\n        inserted = args.slice(2);\r\n        break;\r\n      case \"push\":\r\n      case \"unshift\":\r\n        inserted = args;\r\n        break;\r\n    }\r\n    // 看一下新增的属性是不是对象， 看是否需要进行劫持\r\n    if (inserted) ob.observeArray(inserted);\r\n  };\r\n});\r\n","import { isArray, isObject } from \"../utils\";\r\nimport { arrayMethods } from \"./array\";\r\n\r\nclass Observer {\r\n  constructor(value) {\r\n    //可以调用 __ob__ 是因为这里进行了设置\r\n    // 不让__ob__ 被遍历到\r\n    // value.__ob__ = this; // 我给对象和数组添加一个自定义属性\r\n    Object.defineProperty(value, \"__ob__\", {\r\n      value: this,\r\n      enumerable: false, // 标识这个属性不能被列举出来，不能被循环到\r\n    });\r\n\r\n    // 数组的情况  改写数组的原型链\r\n    if (isArray(value)) {\r\n      value.__proto__ = arrayMethods; //重写数组的方法\r\n      this.observeArray(value)\r\n    } else {\r\n      //对象的情况\r\n      // 核心就是循环对象\r\n      this.walk(value);\r\n    }\r\n  }\r\n\r\n  observeArray(data) {\r\n    //递归遍历数组 对数组内部的对象再次重写  [[]]  [{}]\r\n    data.forEach((item) => observe(item));\r\n  }\r\n\r\n  walk(data) {\r\n    Object.keys(data).forEach((key) => {\r\n      defineReactive(data, key, data[key]);\r\n    });\r\n  }\r\n}\r\n\r\nfunction defineReactive(obj, key, value) {\r\n  // 递归进行观测数据\r\n  observe(value);\r\n  Object.defineProperty(obj, key, {\r\n    get() {\r\n      return value;\r\n    },\r\n    set(newValue) {\r\n      if (newValue === value) return;\r\n      observe(newValue);\r\n      console.log(\"修改\");\r\n      value = newValue;\r\n    },\r\n  });\r\n}\r\n\r\nexport function observe(value) {\r\n  // 如果不是对象就不用观测 写的有问题\r\n  if (!isObject(value)) {\r\n    return;\r\n  }\r\n\r\n  if(value.__ob__){\r\n      return //一个对象不需要重新被观测 \r\n  }\r\n\r\n  return new Observer(value);\r\n}\r\n","import { observe } from \"./observe\"; // rollup-plugin-node-resolve\r\nimport { isFunction } from \"./utils.js\";\r\n\r\nexport function initState(vm) {\r\n  // 把用户的选项传递过来\r\n  const opts = vm.$options;\r\n\r\n  if (opts.data) {\r\n    initData(vm);\r\n  }\r\n}\r\n\r\nfunction proxy(vm, key, source) {\r\n  Object.defineProperty(vm, key, {\r\n    get() {\r\n      return vm[source][key];\r\n    },\r\n    set(newValue) {\r\n      vm[source][key] = newValue;\r\n    },\r\n  });\r\n}\r\n\r\nfunction initData(vm) {\r\n  let data = vm.$options.data;\r\n\r\n  // 这一步 把 data 也放在vm 上了\r\n  data = vm._data = isFunction(data) ? data.call(vm) : data;\r\n\r\n  //   需要将 data 变成响应式的\r\n  observe(data);\r\n\r\n  for(let key in data){\r\n    proxy(vm,key,'_data')\r\n  }\r\n\r\n  // console.log(data)\r\n  // data.arr.push(100);\r\n}\r\n","import { compileToFunction } from \"./compiler\";\r\nimport { initState } from \"./state\";\r\n\r\nexport function initMixin(Vue) {\r\n  // 在vue的原型上进行挂载\r\n  Vue.prototype._init = function (options) {\r\n    // 把用户的选项放到 vm 上，这样在其它方法中都可以获取到 options\r\n    const vm = this;\r\n    vm.$options = options;\r\n\r\n    // 传入数据 对数据进行操作\r\n    initState(vm);\r\n\r\n    if (vm.$options.el) {\r\n      vm.$mount(vm.$options.el);\r\n    }\r\n  };\r\n\r\n  //new Vue({el})  new Vue().$mount\r\n  Vue.prototype.$mount = function (el) {\r\n    const vm = this;\r\n    const opts = vm.$options;\r\n    //获取真实元素\r\n    el = document.querySelector(el);\r\n    vm.$el = el; //页面真实元素\r\n\r\n    //此处对 三种挂载方式进行进行判断\r\n    if (!opts.render) {\r\n      //模板编译\r\n      let template = opts.template;\r\n      if (!template) {\r\n        template = el.outerHTML;\r\n      }\r\n      let render = compileToFunction(template);\r\n      opts.render = render;\r\n    }\r\n    // console.log(opts.render);\r\n  };\r\n}\r\n","import { initMixin } from \"./init\";\r\n\r\nfunction Vue(options) {\r\n  //这里调用原型上挂载的方法\r\n  this._init(options);\r\n}\r\n\r\n//只是把方法挂载到原型上去了 此处并没有执行\r\ninitMixin(Vue);\r\n\r\n// 导出Vue\r\nexport default Vue;\r\n"],"names":["ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parserHTML","html","stack","root","createASTElement","tag","attrs","parent","type","children","start","length","element","push","end","tagName","pop","console","log","text","chars","replace","advance","len","substring","parseStartTag","match","attr","name","value","index","indexOf","startTagMatch","endTagMatch","compileToFunction","template","ast","isFunction","val","isObject","isArray","Array","oldArrayPrototype","prototype","arrayMethods","Object","create","methods","forEach","method","args","call","inserted","ob","__ob__","slice","observeArray","Observer","constructor","defineProperty","enumerable","__proto__","walk","data","item","observe","keys","key","defineReactive","obj","get","set","newValue","initState","vm","opts","$options","initData","proxy","source","_data","initMixin","Vue","_init","options","el","$mount","document","querySelector","$el","render","outerHTML"],"mappings":"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"}